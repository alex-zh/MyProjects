1. Не логировать в базу информационные ошибки и ворнинги (снизить нагрузку)
2. Вывод Last Orders и Last Trades
3. DDE Переполнена очередь сообщений, данные у меня обрабатываются в одном потоке, мой дде сервер не успевает их обработать


------------------------------------------------------------------------------
!сильный тренд, рывок вниз, маленькая свеча закрытая под горизонтальной линией sma, дальше белая свеча возвращающая ситуацию в бычье ручье, но робот не зашел
21 августа 15:32

Робот на других параметрах устоял бы, ситуация была бы более стабильной!
------------------------------------------------------------------------------


------------------------------------------------------
Добавить колонку баланса заявок
нужен статус экспорта заявок и сделок
экспорт в эксель совершенных  сделок
------------------------------------------------------

Доработать вход по difference. Слишком строгое условие, если FMA сильно выше SMA условие должно быть более мягким. Или вообще отсудствовать. 
Дело в том, что потом робот пытается догнать и проигрывает.

Большая белая свеча перекрывающая предыдущую черную - сигнал на выход! нужен тест!

12 августа! сильные убытки! ----------------------------------------------
После сильной просадки, белая свеча - выход!
Вход сразу после выхода на сильном тренде - беда!
Ориентироваться на отклонение от мувинга, наверно, неправильно сильный тренд может 
Сильные тренды упускаются!
После сильного снижения, белая свеча - выход
Нужно определять ситуацию разколбаса! По времени пребывания над и под мувингом.
Определять отклонения от sma. Возможно нужно учитывать силу тренда.

---------------------------------------------------------------------------------------


Доработать выход:
Большая белая свеча пересекает sma, дальше 3 свечи выше fma, позиция вниз должена быть закрыта. Иначе следующее движение (импульс) возьмет большую часть прибыли

Сильные убытки на резких выбросах, 7 августа 15:30
ЧИСЛО РАБОЧИХ МЕСТ В США В ИЮЛЕ ВЫРОСЛО НА 215 ТЫС., ОЖИДАЛСЯ ПОДЪЕМ НА 225 ТЫС


Подумать! Синхронизация ордеров происходит каждую секунду. Может получиться ситуация, когда заявка выставлена, но в списке синхронизированных ее еще нет.

Оптимизация. CPU 30% загрузка. Много свечей нужно грузить один раз в 30 минут. Для работы достаточно 100 штук. Тормозит не получение свеч, а что-то другое. Видимо алгоритм

0. Размер позиции из QUIK
   Если параметры заявки не меняются не нужно ее менять! 
   Выход на большой свече. Si 5 августа 17:00 крайне неудачный вход!
   (Вышла новость позитивная для доллара ИНДЕКС ISM NON-MANUFACTURING В США В ИЮЛЕ ВЫРОС ДО 60,3  ПУНКТА  С  56  ПУНКТОВ, ОЖИДАЛСЯ ПОДЪЕМ ДО 56,2)

   в 18:45
   Ошибка создания заявки. [FORTS][3] "Сейчас эта сессия не идет.".
   История 2000 вместо 1000. 
   Закрытие идет по цене предыдущей свечи, вместо "по рынку". Есть риск нарваться на сильное движение!
   Протестировать выход не просто по закрытию ниже двух мувингов, а с небольшим запасом   
   6 августа начало дня, сильный подъем вверх не учтен при открытии, хотя фильтр на сильное пересечение должен был сработать!   
   нужно добавить время последней итерации с секундами! чтобы отследить момент когда случилась проблема

1. ReplyCode - 3 когда заявка успешно зарегана, 4 -когда сессия не идет, 
   соответсвенно нужно правильно определять что заявка зарегана ReturnValue.IsSuccess недостаточно

2. Запуск робота после креша, должен ли он сразу стартовать? 
Пока скорее всего нет, ведь в текущий момент включение все-равно будет проходить в ручном режиме, и надежнее сначала убедиться в том, 
что состояние робота корректно, после чего его уже стартовать.

3. Если данные устарели (нет DDE) робот не должен выполнять анализ, т.е должен приостанавливаться.

4. (X) Логирование

5. Отображение текущего состояния, размер позиции, ордера

6. На summary странице должны быть текущее состояние по usd, плюс все заявки

7. Возможность очистить робота

8. TODO: частичное исполнение, не ясно какой будет статус у заявки с частичным исполнением. 
Нужно как-то проверить. Иначе если статус completed у нас будут проблемы

9.(X) Фильтр по нефти

10. (X)TakeProfit, AddingToPosition

11. (X) Drawdown реализация, так как важный параметр

12. (X)150202 - 150522 (February - May 2015)
понять почему сумма положительна, процент отрицателен 5мин

13.(X) Логироваться должно не только в базу, но и в текстовый файл. 
Причем делаться это должно максимально надежно (потокобезоспасно, если файл открыт, создаем новый, главное чтобы было что-то залогированное).
Логирование в базе - это скорее для удобства отображения текущего состояния и быстрого восстановления после креша.

14. Горчаков добавить подсчет сделок по эквити 
http://www.youtube.com/watch?t=3142&v=OnU2yLOhoZA (на 75 минуте)

15. (X) Отражать количество трейдов, а не только сделок. так как нужно оценить коммисию.

16. Проблема текущего подсчета: есть возможность выйти по верхней планке, при этом осуществляется вход по нижней планке на этой же свече. 
В жизни, очевидно, такое быть не может. 
Если дошли до верхней планки (шип свечи), маловероятно что движение будет вниз (до нижней тени свечи, где тестер обратно входит в позицию), 
а потом снова поднимится вверх к верхней части свечи.

17. Добавить чарты Profit/Loss Accumulated, (X) MFE, MAE

18. Переделать максимальное отклонение на статистику - превышение цены от мувинка mean + 3*sigma - будем ловить все что сильно оклонилось. 
Проблема - начало сильного тренда может сопровождаться сильным выбросом, на котором мы уже и фиксанемся, хотя нужно было бы держать.

19. Сделать лимитированный стоп лосс. 
1). Регистрация заявки должна быть после выполнения на вход.
2). Вход в позицию может быть за несколько раз. Вошли 2 контрактами, по тейк профиту 1 закрыли. Ниже снова открыли.
3). По закрытию позиции, завка на стоп лосс должна сниматся
4). Вопросы: 
	а) где хранить (откуда брать) информацию по отрытым позициям (цена и направление открытия)
    b) синхронизация 

	
а) История робота 2000 свечей, видимо чем больше тем лучше точность!
б) коммисионные отдельной строкой
в) (X) Size и направление жирным
г) список текущих ордеров в квике и открытые позиции
д) Попробовать использовать отклонения от середины между мувингами
e) попробовать добавить фильтр, если нефть вниз, пятиминутки вверх, входить вниз нельзя!
ж) Прибыль на сделку, (X)добавить проценты по статистике сделок
) сделать фильтр по ошибкам по датам, иначе не удобно видеть ошибки которые прозошли неделю назад. Плюс кнопка удалать
) Когда будет реальная работа нужна кнопка очистить состояние робота (если что-то пойдет не так, останавливаем, закрываем позиции руками, что-то меняем в роботе, чистим состояние, запускаем)